---
title: æ¥é›¨æ°´é—®é¢˜-11ã€42
date: 2025-12-14 22:00:00
tags: [ç®—æ³•, åŒæŒ‡é’ˆ]
categories: [æŠ€æœ¯]
toc: true  # å¿…é¡»æ·»åŠ ï¼Œå¼ºåˆ¶å½“å‰æ–‡ç« å¯ç”¨TOC
---

# å‚è€ƒé¢˜ç›®

[42. æ¥é›¨æ°´](https://leetcode.cn/problems/trapping-rain-water/)

**42. æ¥é›¨æ°´ | åŠ›æ‰£ | LeetCode | ğŸ”´**

ç»™å®š n ä¸ªéè´Ÿæ•´æ•°è¡¨ç¤ºæ¯ä¸ªå®½åº¦ä¸º 1 çš„æŸ±å­çš„é«˜åº¦å›¾ï¼Œè®¡ç®—æŒ‰æ­¤æ’åˆ—çš„æŸ±å­ï¼Œä¸‹é›¨ä¹‹åèƒ½æ¥å¤šå°‘é›¨æ°´ã€‚

### ç¤ºä¾‹ 1ï¼š

![æ¥é›¨æ°´ç¤ºä¾‹1](image.png)

```
è¾“å…¥ï¼šheight = [0,1,0,2,1,0,1,3,2,1,2,1]
è¾“å‡ºï¼š6
```

è§£é‡Šï¼šä¸Šé¢æ˜¯ç”±æ•°ç»„ [0,1,0,2,1,0,1,3,2,1,2,1] è¡¨ç¤ºçš„é«˜åº¦å›¾ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¯ä»¥æ¥ 6 ä¸ªå•ä½çš„é›¨æ°´ï¼ˆè“è‰²éƒ¨åˆ†è¡¨ç¤ºé›¨æ°´ï¼‰ã€‚

### ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šheight = [4,2,0,3,2,5]
è¾“å‡ºï¼š9
```

### æç¤ºï¼š

- n == height.length
- 1 <= n <= 2 * 10â´
- 0 <= height[i] <= 10âµ

## è§£æ³•

æš´åŠ›è§£æ³• â†’ å¤‡å¿˜å½•è§£æ³• â†’ åŒæŒ‡é’ˆè§£æ³•

### æš´åŠ›è§£æ³•-æ ¸å¿ƒæ€è·¯

ä»…ä»…è€ƒè™‘ä½ç½® i è¿™ä¸€ä¸ªä½ç½®èƒ½è£…ä¸‹å¤šå°‘æ°´ï¼Ÿ

![alt text](image-1.png)

èƒ½è£… 2 æ ¼æ°´ï¼Œä¸ºä»€ä¹ˆä½ç½® i æœ€å¤šèƒ½ç›› 2 æ ¼æ°´å‘¢ï¼Ÿå› ä¸ºï¼Œä½ç½® i èƒ½è¾¾åˆ°çš„æ°´æŸ±é«˜åº¦å’Œå…¶å·¦è¾¹çš„æœ€é«˜æŸ±å­ã€å³è¾¹çš„æœ€é«˜æŸ±å­æœ‰å…³ï¼Œæˆ‘ä»¬åˆ†åˆ«ç§°è¿™ä¸¤ä¸ªæŸ±å­é«˜åº¦ä¸º l_max å’Œ r_maxï¼›ä½ç½® i æœ€å¤§çš„æ°´æŸ±é«˜åº¦å°±æ˜¯ min(l_max, r_max)ã€‚

ä¹Ÿå°±æ˜¯å¯¹äºä½ç½® iï¼Œèƒ½å¤Ÿè£…çš„æ°´ä¸ºï¼š

```
water[i] = min(
    # å·¦è¾¹æœ€é«˜çš„æŸ±å­
    max(height[0..i]),  
    # å³è¾¹æœ€é«˜çš„æŸ±å­
    max(height[i..end]) 
) - height[i]
```

åŸºäºæ­¤ï¼Œæš´åŠ›å†™æ³•ï¼š

```java
class Solution {
    public int trap(int[] height) {
        int n = height.length;
        int res = 0;
        for (int i = 1; i < n - 1; i++) {
            int l_max = 0, r_max = 0;
            // æ‰¾å³è¾¹æœ€é«˜çš„æŸ±å­
            for (int j = i; j < n; j++)
                r_max = Math.max(r_max, height[j]);
            // æ‰¾å·¦è¾¹æœ€é«˜çš„æŸ±å­
            for (int j = i; j >= 0; j--)
                l_max = Math.max(l_max, height[j]);
            // å¦‚æœè‡ªå·±å°±æ˜¯æœ€é«˜çš„è¯ï¼Œ
            // l_max == r_max == height[i]
            res += Math.min(l_max, r_max) - height[i];
        }
        return res;
    }
}
```

æ—¶é—´å¤æ‚åº¦ O(NÂ²)ï¼Œç©ºé—´å¤æ‚åº¦ O(1)ã€‚ä½†æ˜¯å¾ˆæ˜æ˜¾è¿™ç§è®¡ç®— r_max å’Œ l_max çš„æ–¹å¼éå¸¸ç¬¨æ‹™

### å¤‡å¿˜å½•ä¼˜åŒ–

å¼€ä¸¤ä¸ªæ•°ç»„ r_max å’Œ l_max å……å½“å¤‡å¿˜å½•ï¼Œl_max[i] è¡¨ç¤ºä½ç½® i å·¦è¾¹æœ€é«˜çš„æŸ±å­é«˜åº¦ï¼Œr_max[i] è¡¨ç¤ºä½ç½® i å³è¾¹æœ€é«˜çš„æŸ±å­é«˜åº¦ã€‚é¢„å…ˆæŠŠè¿™ä¸¤ä¸ªæ•°ç»„è®¡ç®—å¥½ï¼Œé¿å…é‡å¤è®¡ç®—ï¼š

```java
class Solution {
    public int trap(int[] height) {
        if (height.length == 0) {
            return 0;
        }
        int n = height.length;
        int res = 0;
        // æ•°ç»„å……å½“å¤‡å¿˜å½•
        int[] l_max = new int[n];
        int[] r_max = new int[n];
        // åˆå§‹åŒ– base case
        l_max[0] = height[0];
        r_max[n - 1] = height[n - 1];
        // ä»å·¦å‘å³è®¡ç®— l_max
        for (int i = 1; i < n; i++)
            l_max[i] = Math.max(height[i], l_max[i - 1]);
        // ä»å³å‘å·¦è®¡ç®— r_max
        for (int i = n - 2; i >= 0; i--)
            r_max[i] = Math.max(height[i], r_max[i + 1]);
        // è®¡ç®—ç­”æ¡ˆ
        for (int i = 1; i < n - 1; i++)
            res += Math.min(l_max[i], r_max[i]) - height[i];
        return res;
    }
}
```

æŠŠæ—¶é—´å¤æ‚åº¦é™ä½ä¸º O(N)ï¼Œå·²ç»æ˜¯æœ€ä¼˜äº†ï¼Œä½†æ˜¯ç©ºé—´å¤æ‚åº¦æ˜¯ O(N)

### åŒæŒ‡é’ˆè§£æ³•

ç”¨åŒæŒ‡é’ˆè¾¹èµ°è¾¹ç®—ï¼ŒèŠ‚çœä¸‹ç©ºé—´å¤æ‚åº¦ã€‚

```java
class Solution {
    public int trap(int[] height) {
        int left = 0, right = height.length - 1;
        int l_max = 0, r_max = 0;

        int res = 0;
        while (left < right) {
            l_max = Math.max(l_max, height[left]);
            r_max = Math.max(r_max, height[right]);

            // res += min(l_max, r_max) - height[i]
            if (l_max < r_max) {
                res += l_max - height[left];
                left++;
            } else {
                res += r_max - height[right];
                right--;
            }
        }
        return res;
    }
}
```

å¯¹äºä¸‹å›¾çš„æƒ…å†µï¼Œæˆ‘ä»¬å·²ç»çŸ¥é“ l_max < r_max äº†ï¼Œè‡³äºè¿™ä¸ª r_max æ˜¯ä¸æ˜¯å³è¾¹æœ€å¤§çš„ï¼Œä¸é‡è¦ã€‚é‡è¦çš„æ˜¯ height[i] èƒ½å¤Ÿè£…çš„æ°´åªå’Œè¾ƒä½çš„ l_max ä¹‹å·®æœ‰å…³ï¼Œæ‰€ä»¥æ­¤å¤„è‡ªç„¶è®¡ç®—çš„æ˜¯ left æŸ±æ‰€èƒ½æ¥æ”¶é›¨æ°´ï¼š

![alt text](image-2.png)

# æ‹“å±•é¢˜ç›®

[11. ç››æœ€å¤šæ°´çš„å®¹å™¨](https://leetcode.cn/problems/container-with-most-water/)

**11. ç››æœ€å¤šæ°´çš„å®¹å™¨ | åŠ›æ‰£ | LeetCode | ğŸŸ **

ç»™å®šä¸€ä¸ªé•¿åº¦ä¸º n çš„æ•´æ•°æ•°ç»„ height ã€‚æœ‰ n æ¡å‚çº¿ï¼Œç¬¬ i æ¡çº¿çš„ä¸¤ä¸ªç«¯ç‚¹æ˜¯ (i, 0) å’Œ (i, height[i]) ã€‚

æ‰¾å‡ºå…¶ä¸­çš„ä¸¤æ¡çº¿ï¼Œä½¿å¾—å®ƒä»¬ä¸ x è½´å…±åŒæ„æˆçš„å®¹å™¨å¯ä»¥å®¹çº³æœ€å¤šçš„æ°´ã€‚

è¿”å›å®¹å™¨å¯ä»¥å‚¨å­˜çš„æœ€å¤§æ°´é‡ã€‚

è¯´æ˜ï¼šä½ ä¸èƒ½å€¾æ–œå®¹å™¨ã€‚

### ç¤ºä¾‹ 1ï¼š

```
è¾“å…¥ï¼š[1,8,6,2,5,4,8,3,7]
è¾“å‡ºï¼š49
```

è§£é‡Šï¼šå›¾ä¸­å‚ç›´çº¿ä»£è¡¨è¾“å…¥æ•°ç»„ [1,8,6,2,5,4,8,3,7]ã€‚åœ¨æ­¤æƒ…å†µä¸‹ï¼Œå®¹å™¨èƒ½å¤Ÿå®¹çº³æ°´ï¼ˆè¡¨ç¤ºä¸ºè“è‰²éƒ¨åˆ†ï¼‰çš„æœ€å¤§å€¼ä¸º 49ã€‚

### ç¤ºä¾‹ 2ï¼š

```
è¾“å…¥ï¼šheight = [1,1]
è¾“å‡ºï¼š1
```

### æç¤ºï¼š

- n == height.length
- 2 <= n <= 10âµ
- 0 <= height[i] <= 10â´

é¢˜ç›®æ¥æºï¼šåŠ›æ‰£ 11. ç››æœ€å¤šæ°´çš„å®¹å™¨ã€‚

## æ€è·¯

å’Œæ¥é›¨æ°´é—®é¢˜å¾ˆç±»ä¼¼ï¼Œå¯ä»¥å®Œå…¨å¥—ç”¨å‰æ–‡çš„æ€è·¯ï¼Œè€Œä¸”è¿˜æ›´ç®€å•ã€‚ä¸¤é“é¢˜çš„åŒºåˆ«åœ¨äºï¼š

æ¥é›¨æ°´é—®é¢˜ç»™å‡ºçš„ç±»ä¼¼ä¸€å¹…ç›´æ–¹å›¾ï¼Œæ¯ä¸ªæ¨ªåæ ‡éƒ½æœ‰å®½åº¦ï¼Œè€Œæœ¬é¢˜ç»™å‡ºçš„æ¯ä¸ªæ¨ªåæ ‡æ˜¯ä¸€æ¡ç«–çº¿ï¼Œæ²¡æœ‰å®½åº¦ã€‚

å‰æ–‡è®¨è®ºäº†åŠå¤© l_max å’Œ r_maxï¼Œå®é™…ä¸Šéƒ½æ˜¯ä¸ºäº†è®¡ç®— height[i] èƒ½å¤Ÿè£…å¤šå°‘æ°´ï¼›è€Œæœ¬é¢˜ä¸­ height[i] æ²¡æœ‰äº†å®½åº¦ï¼Œé‚£è‡ªç„¶å°±å¥½åŠå¤šäº†ã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœåœ¨æ¥é›¨æ°´é—®é¢˜ä¸­ï¼Œä½ çŸ¥é“äº† height[left] å’Œ height[right] çš„é«˜åº¦ï¼Œä½ èƒ½ç®—å‡º left å’Œ right ä¹‹é—´èƒ½å¤Ÿç››ä¸‹å¤šå°‘æ°´å—ï¼Ÿ

ä¸èƒ½ï¼Œå› ä¸ºä½ ä¸çŸ¥é“ left å’Œ right ä¹‹é—´æ¯ä¸ªæŸ±å­å…·ä½“èƒ½ç››å¤šå°‘æ°´ï¼Œä½ å¾—é€šè¿‡æ¯ä¸ªæŸ±å­çš„ l_max å’Œ r_max æ¥è®¡ç®—æ‰è¡Œã€‚

åè¿‡æ¥ï¼Œå°±æœ¬é¢˜è€Œè¨€ï¼Œä½ çŸ¥é“äº† height[left] å’Œ height[right] çš„é«˜åº¦ï¼Œèƒ½ç®—å‡º left å’Œ right ä¹‹é—´èƒ½å¤Ÿç››ä¸‹å¤šå°‘æ°´å—ï¼Ÿ

å¯ä»¥ï¼Œå› ä¸ºæœ¬é¢˜ä¸­ç«–çº¿æ²¡æœ‰å®½åº¦ï¼Œæ‰€ä»¥ left å’Œ right ä¹‹é—´èƒ½å¤Ÿç››çš„æ°´å°±æ˜¯ï¼š

```
min(height[left], height[right]) * (right - left)
```

è§£å†³è¿™é“é¢˜çš„æ€è·¯ä¾ç„¶æ˜¯åŒæŒ‡é’ˆæŠ€å·§ï¼š

### åŒæŒ‡é’ˆ

ç”¨ left å’Œ right ä¸¤ä¸ªæŒ‡é’ˆä»ä¸¤ç«¯å‘ä¸­å¿ƒæ”¶ç¼©ï¼Œä¸€è¾¹æ”¶ç¼©ä¸€è¾¹è®¡ç®— [left, right] ä¹‹é—´çš„çŸ©å½¢é¢ç§¯ï¼Œå–æœ€å¤§çš„é¢ç§¯å€¼å³æ˜¯ç­”æ¡ˆã€‚

æ³¨æ„ï¼Œæ”¶ç¼©çš„æ“ä½œæœ¬å°±æ˜¯ä¸ºäº†å¯»æ‰¾æ›´å¤§çš„é¢ç§¯ï¼Œæ‰€ä»¥åº”è¯¥æŠŠ left å’Œ right æ›´å°çš„ä¸€è¾¹å…ˆè¿›è¡Œæ”¶ç¼©ï¼ŒæœŸæœ›èƒ½å¤Ÿæ‰¾åˆ°æ›´é«˜çš„è¾¹ä»£æ›¿ï¼Œè¿›è€Œèƒ½å¤Ÿæ›´æ–°æœ€å¤§é¢ç§¯

```java
class Solution {
    public int maxArea(int[] height) {
        int left = 0, right = height.length - 1;
        int res = 0;
        while (left < right) {
            // [left, right] ä¹‹é—´çš„çŸ©å½¢é¢ç§¯
            int cur_area = Math.min(height[left], height[right]) * (right - left);
            res = Math.max(res, cur_area);
            // åŒæŒ‡é’ˆæŠ€å·§ï¼Œç§»åŠ¨è¾ƒä½çš„ä¸€è¾¹
            if (height[left] < height[right]) {
                left++;
            } else {
                right--;
            }
        }
        return res;
    }
}
```